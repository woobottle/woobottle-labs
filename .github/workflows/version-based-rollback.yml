name: Version-Based Rollback

on:
  workflow_dispatch:
    inputs:
      target_version:
        description: 'ë¡¤ë°±í•  ë°°í¬ ë²„ì „ (ë¹„ì›Œë‘ë©´ ë°”ë¡œ ì´ì „ ë²„ì „ìœ¼ë¡œ ìžë™ ë¡¤ë°±)'
        required: false
        type: string
      confirm_rollback:
        description: 'ë¡¤ë°± í™•ì¸ (yes ìž…ë ¥ í•„ìš”)'
        required: true
        type: string

jobs:
  determine-rollback-target:
    runs-on: ubuntu-latest
    if: inputs.confirm_rollback == 'yes'
    outputs:
      target-version: ${{ steps.determine.outputs.target-version }}
      current-version: ${{ steps.determine.outputs.current-version }}
      rollback-type: ${{ steps.determine.outputs.rollback-type }}
    
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}

      - name: Determine Rollback Target
        id: determine
        run: |
          echo "ðŸ” ë¡¤ë°± ëŒ€ìƒ ê²°ì • ì¤‘..."
          
          # í˜„ìž¬ ë²„ì „ ì¡°íšŒ
          CURRENT_VERSION=""
          if aws s3api head-object --bucket woo-bottle.com --key ".deploy-metadata.json" >/dev/null 2>&1; then
            CURRENT_VERSION=$(aws s3api get-object \
              --bucket woo-bottle.com \
              --key ".deploy-metadata.json" \
              --query 'Body' \
              --output text | jq -r '.deployVersion' 2>/dev/null || echo "unknown")
          fi
          
          if [[ -n "${{ inputs.target_version }}" ]]; then
            # ì‚¬ìš©ìžê°€ íŠ¹ì • ë²„ì „ ìž…ë ¥
            TARGET_VERSION="${{ inputs.target_version }}"
            ROLLBACK_TYPE="manual"
            echo "ðŸŽ¯ ìˆ˜ë™ ë¡¤ë°±: $TARGET_VERSION"
          else
            # ìžë™ìœ¼ë¡œ ì´ì „ ë²„ì „ ì°¾ê¸°
            echo "ðŸ” ìµœê·¼ ë°°í¬ ë²„ì „ë“¤ ì¡°íšŒ ì¤‘..."
            
            # ìµœê·¼ ë°°í¬ ë©”íƒ€ë°ì´í„° ë²„ì „ë“¤ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì¡°íšŒ
            VERSIONS_INFO=$(aws s3api list-object-versions \
              --bucket woo-bottle.com \
              --prefix ".deploy-metadata.json" \
              --query 'Versions[] | sort_by(@, &LastModified) | reverse(@)' \
              --output json)
            
            if [[ -z "$VERSIONS_INFO" || "$VERSIONS_INFO" == "[]" ]]; then
              echo "âŒ ì´ì „ ë²„ì „ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"
              exit 1
            fi
            
            # í˜„ìž¬ê°€ ì•„ë‹Œ ê°€ìž¥ ìµœê·¼ ì´ì „ ë²„ì „ ì°¾ê¸°
            TARGET_VERSION=""
            echo "$VERSIONS_INFO" | jq -r '.[].VersionId' | while read version_id; do
              if [[ -n "$version_id" && "$version_id" != "null" ]]; then
                DEPLOY_VERSION=$(aws s3api get-object \
                  --bucket woo-bottle.com \
                  --key ".deploy-metadata.json" \
                  --version-id "$version_id" \
                  --query 'Body' \
                  --output text 2>/dev/null | jq -r '.deployVersion' 2>/dev/null || echo "")
                
                if [[ -n "$DEPLOY_VERSION" && "$DEPLOY_VERSION" != "$CURRENT_VERSION" && "$DEPLOY_VERSION" != "null" ]]; then
                  echo "FOUND_TARGET=$DEPLOY_VERSION" >> $GITHUB_ENV
                  break
                fi
              fi
            done
            
            TARGET_VERSION="${FOUND_TARGET:-}"
            
            if [[ -z "$TARGET_VERSION" ]]; then
              echo "âŒ ë¡¤ë°±í•  ì´ì „ ë²„ì „ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"
              echo "í˜„ìž¬ ë²„ì „: $CURRENT_VERSION"
              exit 1
            fi
            
            ROLLBACK_TYPE="automatic"
            echo "âš¡ ìžë™ ë¡¤ë°±: $TARGET_VERSION (ì´ì „ ë²„ì „)"
          fi
          
          if [[ "$TARGET_VERSION" == "$CURRENT_VERSION" ]]; then
            echo "âŒ ë¡¤ë°± ëŒ€ìƒ ë²„ì „ì´ í˜„ìž¬ ë²„ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤!"
            echo "í˜„ìž¬: $CURRENT_VERSION, ëŒ€ìƒ: $TARGET_VERSION"
            exit 1
          fi
          
          echo "target-version=$TARGET_VERSION" >> $GITHUB_OUTPUT
          echo "current-version=$CURRENT_VERSION" >> $GITHUB_OUTPUT
          echo "rollback-type=$ROLLBACK_TYPE" >> $GITHUB_OUTPUT
          
          echo "ðŸ“‹ ë¡¤ë°± ì •ë³´:"
          echo "  í˜„ìž¬ ë²„ì „: $CURRENT_VERSION"
          echo "  ëŒ€ìƒ ë²„ì „: $TARGET_VERSION"
          echo "  ë¡¤ë°± íƒ€ìž…: $ROLLBACK_TYPE"

  rollback:
    runs-on: ubuntu-latest
    needs: determine-rollback-target
    if: inputs.confirm_rollback == 'yes'
    
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}

      - name: Validate Target Version
        run: |
          TARGET_VERSION="${{ needs.determine-rollback-target.outputs.target-version }}"
          
          echo "ðŸ” ë²„ì „ $TARGET_VERSION ê²€ì¦ ì¤‘..."
          
          # í•´ë‹¹ ë²„ì „ìœ¼ë¡œ íƒœê·¸ëœ ê°ì²´ë“¤ì´ ìžˆëŠ”ì§€ í™•ì¸
          OBJECTS=$(aws s3api list-objects-v2 \
            --bucket woo-bottle.com \
            --query 'Contents[?!starts_with(Key, `.`)].Key' \
            --output text)
          
          FOUND_OBJECTS=""
          FOUND_COUNT=0
          
          for obj in $OBJECTS; do
            if [[ -n "$obj" ]]; then
              TAGS=$(aws s3api get-object-tagging \
                --bucket woo-bottle.com \
                --key "$obj" \
                --query 'TagSet[?Key==`DeployVersion`].Value' \
                --output text 2>/dev/null || echo "")
              
              if [[ "$TAGS" == "$TARGET_VERSION" ]]; then
                FOUND_OBJECTS="$FOUND_OBJECTS $obj"
                ((FOUND_COUNT++))
              fi
            fi
          done
          
          if [[ $FOUND_COUNT -eq 0 ]]; then
            echo "âŒ ë²„ì „ $TARGET_VERSIONì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"
            echo ""
            echo "ðŸ’¡ ì‚¬ìš© ê°€ëŠ¥í•œ ìµœê·¼ ë²„ì „ë“¤:"
            aws s3api list-object-versions \
              --bucket woo-bottle.com \
              --prefix ".deploy-metadata.json" \
              --query 'Versions[?IsLatest==`false`] | [0:5].[LastModified]' \
              --output table
            exit 1
          fi
          
          echo "âœ… ë²„ì „ $TARGET_VERSION ë°œê²¬: $FOUND_COUNTê°œ ê°ì²´"
          echo "FOUND_OBJECTS=$FOUND_OBJECTS" >> $GITHUB_ENV
          echo "FOUND_COUNT=$FOUND_COUNT" >> $GITHUB_ENV

      - name: Backup Current Version
        run: |
          BACKUP_TIME=$(date +%Y%m%d_%H%M%S)
          CURRENT_VERSION="${{ needs.determine-rollback-target.outputs.current-version }}"
          
          echo "ðŸ’¾ í˜„ìž¬ ë²„ì „ ë°±ì—… ì¤‘: $CURRENT_VERSION"
          
          # í˜„ìž¬ ë²„ì „ì„ ë°±ì—… í´ë”ë¡œ ë³µì‚¬
          aws s3 sync s3://woo-bottle.com/ s3://woo-bottle.com/.backups/backup_${CURRENT_VERSION}_$BACKUP_TIME/ \
            --exclude ".backups/*" \
            --exclude ".deploy-metadata.json"
          
          echo "âœ… ë°±ì—… ì™„ë£Œ: .backups/backup_${CURRENT_VERSION}_$BACKUP_TIME/"

      - name: Execute Rollback
        run: |
          TARGET_VERSION="${{ needs.determine-rollback-target.outputs.target-version }}"
          
          echo "ðŸ”„ ë²„ì „ $TARGET_VERSIONìœ¼ë¡œ ë¡¤ë°± ì‹¤í–‰ ì¤‘..."
          
          RESTORED_COUNT=0
          
          # í•´ë‹¹ ë²„ì „ì˜ ê° ê°ì²´ë¥¼ í˜„ìž¬ ë²„ì „ìœ¼ë¡œ ë³µì›
          for obj in $FOUND_OBJECTS; do
            if [[ -n "$obj" ]]; then
              echo "ðŸ“„ ë³µì› ì¤‘: $obj"
              
              # í•´ë‹¹ ê°ì²´ì˜ ëª¨ë“  ë²„ì „ì„ ì¡°íšŒí•˜ì—¬ ì˜¬ë°”ë¥¸ ë²„ì „ ì°¾ê¸°
              aws s3api list-object-versions \
                --bucket woo-bottle.com \
                --prefix "$obj" \
                --query 'Versions[].[VersionId,LastModified]' \
                --output text | \
              while read version_id last_modified; do
                if [[ -n "$version_id" && "$version_id" != "null" ]]; then
                  # ê° ë²„ì „ì˜ íƒœê·¸ í™•ì¸
                  TAGS=$(aws s3api get-object-tagging \
                    --bucket woo-bottle.com \
                    --key "$obj" \
                    --version-id "$version_id" \
                    --query 'TagSet[?Key==`DeployVersion`].Value' \
                    --output text 2>/dev/null || echo "")
                  
                  if [[ "$TAGS" == "$TARGET_VERSION" ]]; then
                    echo "  âœ… ë³µì›: $obj (ë²„ì „: $version_id)"
                    # í•´ë‹¹ ë²„ì „ì„ í˜„ìž¬ ë²„ì „ìœ¼ë¡œ ë³µì‚¬
                    aws s3api copy-object \
                      --bucket woo-bottle.com \
                      --copy-source "woo-bottle.com/$obj?versionId=$version_id" \
                      --key "$obj" >/dev/null
                    break
                  fi
                fi
              done
              
              ((RESTORED_COUNT++))
            fi
          done
          
          echo "RESTORED_COUNT=$RESTORED_COUNT" >> $GITHUB_ENV
          
          # ë¡¤ë°±ëœ ë©”íƒ€ë°ì´í„°ë„ ë³µì›
          echo "ðŸ“ ë°°í¬ ë©”íƒ€ë°ì´í„° ë³µì› ì¤‘..."
          aws s3api list-object-versions \
            --bucket woo-bottle.com \
            --prefix ".deploy-metadata.json" \
            --query 'Versions[].[VersionId,LastModified]' \
            --output text | \
          while read version_id last_modified; do
            if [[ -n "$version_id" && "$version_id" != "null" ]]; then
              DEPLOY_VERSION=$(aws s3api get-object \
                --bucket woo-bottle.com \
                --key ".deploy-metadata.json" \
                --version-id "$version_id" \
                --query 'Body' \
                --output text 2>/dev/null | jq -r '.deployVersion' 2>/dev/null || echo "")
              
              if [[ "$DEPLOY_VERSION" == "$TARGET_VERSION" ]]; then
                echo "  âœ… ë©”íƒ€ë°ì´í„° ë³µì›: $DEPLOY_VERSION"
                aws s3api copy-object \
                  --bucket woo-bottle.com \
                  --copy-source "woo-bottle.com/.deploy-metadata.json?versionId=$version_id" \
                  --key ".deploy-metadata.json" >/dev/null
                break
              fi
            fi
          done

      - name: CloudFront cache invalidation
        if: env.CLOUDFRONT_DISTRIBUTION_ID != ''
        uses: chetan/invalidate-cloudfront-action@v2
        env:
          DISTRIBUTION: ${{ secrets.CLOUDFRONT_DISTRIBUTION_ID }}
          PATHS: "/*"
          AWS_REGION: ${{ secrets.AWS_REGION }}
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}

      - name: Rollback Summary
        run: |
          TARGET_VERSION="${{ needs.determine-rollback-target.outputs.target-version }}"
          CURRENT_VERSION="${{ needs.determine-rollback-target.outputs.current-version }}"
          ROLLBACK_TYPE="${{ needs.determine-rollback-target.outputs.rollback-type }}"
          
          if [[ "$ROLLBACK_TYPE" == "automatic" ]]; then
            ROLLBACK_DESC="âš¡ **ìžë™ ë¡¤ë°±** (ë°”ë¡œ ì´ì „ ë²„ì „)"
          else
            ROLLBACK_DESC="ðŸŽ¯ **ìˆ˜ë™ ë¡¤ë°±** (ì§€ì •ëœ ë²„ì „)"
          fi
          
          # ë¡¤ë°±ëœ ë©”íƒ€ë°ì´í„° ì¡°íšŒ
          ROLLBACK_INFO=""
          if aws s3api head-object --bucket woo-bottle.com --key ".deploy-metadata.json" >/dev/null 2>&1; then
            ROLLBACK_INFO=$(aws s3api get-object \
              --bucket woo-bottle.com \
              --key ".deploy-metadata.json" \
              --query 'Body' \
              --output text 2>/dev/null | jq -r '.deployTime + " by " + .deployedBy' 2>/dev/null || echo "ì •ë³´ ì—†ìŒ")
          fi
          
          cat >> $GITHUB_STEP_SUMMARY << EOF
          ## ðŸ”„ ë¡¤ë°± ì™„ë£Œ
          
          $ROLLBACK_DESC
          
          | í•­ëª© | ê°’ |
          |------|-----|
          | ðŸ”™ **ì´ì „ ë²„ì „** | \`$CURRENT_VERSION\` |
          | âœ… **í˜„ìž¬ ë²„ì „** | \`$TARGET_VERSION\` |
          | ðŸŒ **URL** | [https://woo-bottle.com](https://woo-bottle.com) |
          | ðŸ“… **ë¡¤ë°± ì‹œê°„** | $(date) |
          | ðŸ‘¤ **ë¡¤ë°± ì‹¤í–‰ìž** | ${{ github.actor }} |
          | ðŸ“ **ë³µì›ëœ íŒŒì¼** | ${RESTORED_COUNT}ê°œ |
          | ðŸ“‹ **ì›ë³¸ ë°°í¬ ì •ë³´** | $ROLLBACK_INFO |
          
          ### âœ… ë¡¤ë°±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
          ì‚¬ì´íŠ¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”: https://woo-bottle.com
          
          ### ðŸ”„ ë‹¤ì‹œ ë¡¤ë°±ì´ í•„ìš”í•œ ê²½ìš°
          - **ë¹ ë¥¸ ë¡¤ë°±**: target_versionì„ ë¹„ì›Œë‘ê³  ì‹¤í–‰
          - **íŠ¹ì • ë²„ì „**: ì›í•˜ëŠ” ë²„ì „ì„ ìž…ë ¥í•˜ê³  ì‹¤í–‰
          - **ë˜ëŒë¦¬ê¸°**: ë°±ì—…ëœ \`$CURRENT_VERSION\`ìœ¼ë¡œ ë¡¤ë°±
          
          ### ðŸ’¾ ë°±ì—… ìœ„ì¹˜
          S3 ê²½ë¡œ: \`s3://woo-bottle.com/.backups/backup_${CURRENT_VERSION}_$(date +%Y%m%d_%H%M%S)/\`
          EOF

  show-versions:
    runs-on: ubuntu-latest
    if: inputs.confirm_rollback != 'yes'
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}

      - name: Show Available Versions
        run: |
          cat >> $GITHUB_STEP_SUMMARY << 'EOF'
          ## ðŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ë°°í¬ ë²„ì „ë“¤
          
          | ë°°í¬ ì‹œê°„ | ë²„ì „ | ì»¤ë°‹ | ë°°í¬ìž | ìƒíƒœ |
          |----------|------|------|--------|------|
          EOF
          
          # í˜„ìž¬ ë²„ì „ í™•ì¸
          CURRENT_VERSION=""
          if aws s3api head-object --bucket woo-bottle.com --key ".deploy-metadata.json" >/dev/null 2>&1; then
            CURRENT_VERSION=$(aws s3api get-object \
              --bucket woo-bottle.com \
              --key ".deploy-metadata.json" \
              --query 'Body' \
              --output text | jq -r '.deployVersion' 2>/dev/null || echo "unknown")
          fi
          
          # ìµœê·¼ ë°°í¬ ë©”íƒ€ë°ì´í„°ë“¤ ì¡°íšŒ
          aws s3api list-object-versions \
            --bucket woo-bottle.com \
            --prefix ".deploy-metadata.json" \
            --query 'Versions[] | sort_by(@, &LastModified) | reverse(@) | [0:10].[VersionId,LastModified]' \
            --output text | \
          while read version_id last_modified; do
            if [[ -n "$version_id" && "$version_id" != "null" ]]; then
              METADATA=$(aws s3api get-object \
                --bucket woo-bottle.com \
                --key ".deploy-metadata.json" \
                --version-id "$version_id" \
                --query 'Body' \
                --output text 2>/dev/null)
              
              if [[ -n "$METADATA" ]]; then
                DEPLOY_VERSION=$(echo "$METADATA" | jq -r '.deployVersion' 2>/dev/null || echo "unknown")
                DEPLOY_TIME=$(echo "$METADATA" | jq -r '.deployTime' 2>/dev/null || echo "unknown")
                GIT_COMMIT=$(echo "$METADATA" | jq -r '.gitCommitShort' 2>/dev/null || echo "unknown")
                DEPLOYED_BY=$(echo "$METADATA" | jq -r '.deployedBy' 2>/dev/null || echo "unknown")
                
                if [[ "$DEPLOY_VERSION" == "$CURRENT_VERSION" ]]; then
                  STATUS="ðŸŸ¢ í˜„ìž¬"
                else
                  STATUS="ðŸ”µ ì´ì „"
                fi
                
                echo "| $DEPLOY_TIME | \`$DEPLOY_VERSION\` | \`$GIT_COMMIT\` | $DEPLOYED_BY | $STATUS |" >> $GITHUB_STEP_SUMMARY
              fi
            fi
          done
          
          cat >> $GITHUB_STEP_SUMMARY << 'EOF'
          
          ### ðŸ”„ ë¡¤ë°± ë°©ë²•
          
          #### 1ï¸âƒ£ ë¹ ë¥¸ ë¡¤ë°± (ë°”ë¡œ ì´ì „ ë²„ì „)
          - `target_version`: **ë¹„ì›Œë‘ **
          - `confirm_rollback`: `yes`
          - âœ¨ ê°€ìž¥ ê°„ë‹¨í•˜ê³  ë¹ ë¥¸ ë°©ë²•
          
          #### 2ï¸âƒ£ íŠ¹ì • ë²„ì „ ë¡¤ë°±
          - `target_version`: ìœ„ í‘œì—ì„œ ì›í•˜ëŠ” ë²„ì „ ë³µì‚¬ (ì˜ˆ: `run-120-abc1234`)
          - `confirm_rollback`: `yes`
          - ðŸŽ¯ ì •í™•í•œ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
          
          #### 3ï¸âƒ£ ë²„ì „ í™•ì¸ë§Œ
          - `confirm_rollback`: `yes` ì™¸ì˜ ê°’ (ì˜ˆ: `no`)
          - ðŸ“‹ ë¡¤ë°±í•˜ì§€ ì•Šê³  ë²„ì „ ëª©ë¡ë§Œ í™•ì¸
          
          ### âš ï¸ ì£¼ì˜ì‚¬í•­
          - ë¡¤ë°± ì „ í˜„ìž¬ ë²„ì „ì´ ìžë™ìœ¼ë¡œ ë°±ì—…ë©ë‹ˆë‹¤
          - S3 ê°ì²´ ë²„ì €ë‹ì„ í†µí•´ ì•ˆì „í•˜ê²Œ ë³µì›ë©ë‹ˆë‹¤
          - CloudFront ì‚¬ìš© ì‹œ ìºì‹œ ë¬´íš¨í™”ê°€ ìžë™ ì‹¤í–‰ë©ë‹ˆë‹¤
          EOF
          
          echo ""
          echo "âŒ ë¡¤ë°± í™•ì¸ëž€ì— 'yes'ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”."

  # ë¡¤ë°± ì‹¤íŒ¨ ì‹œ ì•Œë¦¼
  rollback-failed:
    runs-on: ubuntu-latest
    if: failure() || (inputs.confirm_rollback == 'yes' && needs.determine-rollback-target.result == 'failure')
    steps:
      - name: Rollback failed notification
        run: |
          cat >> $GITHUB_STEP_SUMMARY << 'EOF'
          ## âŒ ë¡¤ë°± ì‹¤íŒ¨
          
          ë¡¤ë°± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì„ í™•ì¸í•´ì£¼ì„¸ìš”:
          
          ### ðŸ” í™•ì¸ ì‚¬í•­
          1. **AWS ê¶Œí•œ**: S3 ì½ê¸°/ì“°ê¸° ê¶Œí•œ í™•ì¸
          2. **ë²„ì „ ì¡´ìž¬**: ì§€ì •í•œ ë²„ì „ì´ ì‹¤ì œë¡œ ì¡´ìž¬í•˜ëŠ”ì§€ í™•ì¸
          3. **ë„¤íŠ¸ì›Œí¬**: AWS API ì—°ê²° ìƒíƒœ í™•ì¸
          
          ### ðŸ› ï¸ ìˆ˜ë™ ë³µêµ¬ ë°©ë²•
          AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ ë³µêµ¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:
          
          ```bash
          # 1. ì‚¬ìš© ê°€ëŠ¥í•œ ë²„ì „ í™•ì¸
          aws s3api list-object-versions --bucket woo-bottle.com --prefix ".deploy-metadata.json"
          
          # 2. íŠ¹ì • ë²„ì „ì˜ íŒŒì¼ë“¤ ë³µì›
          aws s3api copy-object \
            --bucket woo-bottle.com \
            --copy-source "woo-bottle.com/index.html?versionId=YOUR_VERSION_ID" \
            --key "index.html"
          ```
          
          ### ðŸ“ž ì§€ì›
          ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ê°œë°œíŒ€ì— ë¬¸ì˜í•˜ê±°ë‚˜ GitHub Issuesë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.
          EOF
          
          echo "âŒ ë¡¤ë°±ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!"
          echo "ðŸ”§ ìˆ˜ë™ìœ¼ë¡œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."
